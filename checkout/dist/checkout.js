!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PaymentGateway=t():e.PaymentGateway=t()}(self,()=>(window.PaymentGateway=class{constructor(e){if(!e||!e.key||!e.orderId)throw new Error("key and orderId are required");this.key=e.key,this.orderId=e.orderId,this.onSuccess=e.onSuccess||function(){},this.onFailure=e.onFailure||function(){},this.onClose=e.onClose||function(){},this.handleMessage=this.handleMessage.bind(this)}open(){this.modal=document.createElement("div"),this.modal.id="payment-gateway-modal",this.modal.setAttribute("data-test-id","payment-modal"),this.modal.innerHTML=`\n      <div class="modal-overlay">\n        <div class="modal-content">\n          <iframe\n            data-test-id="payment-iframe"\n            src="http://localhost:3001/checkout?order_id=${this.orderId}&embedded=true"\n            style="width:100%;height:400px;border:none;"\n          ></iframe>\n          <button\n            data-test-id="close-modal-button"\n            class="close-button"\n          >Ã—</button>\n        </div>\n      </div>\n    `,document.body.appendChild(this.modal),this.modal.querySelector(".close-button").onclick=()=>{this.close()},window.addEventListener("message",this.handleMessage)}handleMessage(e){const{type:t,data:o}=e.data||{};"payment_success"===t&&(this.onSuccess(o),this.close()),"payment_failed"===t&&this.onFailure(o),"close_modal"===t&&this.close()}close(){window.removeEventListener("message",this.handleMessage),this.modal&&(document.body.removeChild(this.modal),this.modal=null),this.onClose()}},{}));